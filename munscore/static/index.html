<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <!-- header -->
        <h1 class="text-center">
            模拟联合国数据模型
        </h1>
        <hr>
        <!-- 两党政府执行力指数 -->
        <div class="row">
            <div class="col-md-6 bg-info">
                <p class="h3" id="Apoint">
                    A党政府执行力:70
                </p>
            </div>
            <div class="col-md-6 bg-danger">
                <p class="h3">
                    B党政府执行力:80
                </p>
            </div>
        </div>
        <hr>
        <h2 class="text-center">
            A会场
        </h2>
        <br>
        <div class="row">
            <!-- 议员个人info -->
            <div class="col-md-8">
                <p class="h3">
                    议员个人信息
                </p>
                <table class="table table-bordered table-hover" id="mytableA">
                    <tr class="info">
                        <th>议员编号</th>
                        <th>议员名称</th>
                        <th>议员指数</th>
                        <th>所属党派</th>
                    </tr>
                </table>
            </div>
            <br>

            <!-- 整体指数 -->
            <div class="col-md-4">
                <p class="h3">
                国会矛盾指数
                </p>
                <p class="h4">
                    70
                </p>
            </div>
        </div>
        <br>
        <p class="h3">
            添加一个议员
        </p>
        <!-- 新增加一个议员 -->
        <form id="Aform">
            <h4>议员名称:</h4>
            <input id="namea" type="text" class="form-control">
            <h4>所属党派:</h4>
            <select id="partya" class="form-control">
                <option>
                    A
                </option>
                <option>
                    B
                </option>
            </select>
            <input type="submit" class="btn" value="提交修改">
        </form>
        <hr>
        <h2 class="text-center">
            B会场
        </h2>
        <br>
        <div class="row">
            <!-- 议员个人info -->
            <div class="col-md-8">
                <p class="h3">
                    议员个人信息
                </p>
                <table class="table table-bordered table-hover" id="mytableB">
                    <tr class="info">
                        <th>议员编号</th>
                        <th>议员名称</th>
                        <th>议员指数</th>
                        <th>所属党派</th>
                    </tr>
                </table>
            </div>
            <br>

            <!-- 整体指数 -->
            <div class="col-md-4">
                <p class="h3">
                国会矛盾指数
                </p>
                <p class="h4">
                    70
                </p>
            </div>
        </div>
        <br>
        <p class="h3">
            添加一个议员
        </p>
        <!-- 新增加一个议员 -->
        <form id="Bform">
            <h4>议员名称:</h4>
            <input id="nameb" type="text" class="form-control">
            <h4>所属党派:</h4>
            <select id="partyb" class="form-control">
                <option>
                    A
                </option>
                <option>
                    B
                </option>
            </select>
            <input type="submit" class="btn" value="提交修改">
        </form>
        <hr>
        <h2 class="text-center">
            C会场
        </h2>
        <br>
        <div class="row">
            <!-- 议员个人info -->
            <div class="col-md-8">
                <p class="h3">
                    议员个人信息
                </p>
                <table class="table table-bordered table-hover" id="mytableC">
                    <tr class="info">
                        <th>议员编号</th>
                        <th>议员名称</th>
                        <th>议员指数</th>
                        <th>所属党派</th>
                    </tr>
                </table>
            </div>
            <br>

            <!-- 整体指数 -->
            <div class="col-md-4">
                <p class="h3">
                国会矛盾指数
                </p>
                <p class="h4">
                    70
                </p>
            </div>
        </div>
        <br>
        <p class="h3">
            添加一个议员
        </p>
        <!-- 新增加一个议员 -->
        <form id="Cform">
            <h4>议员名称:</h4>
            <input id="namec" type="text" class="form-control">
            <h4>所属党派:</h4>
            <select id="partyc" class="form-control">
                <option>
                    A
                </option>
                <option>
                    B
                </option>
            </select>
            <input type="submit" class="btn" value="提交修改">
        </form>
        <hr>
    <script>
        var k1=0;
        Aform.addEventListener("submit",(ev) => {
            k1++;
            ev.preventDefault();
            var name1=document.getElementById('namea').value;
            var party1=document.getElementById('partya').value;
            console.log(party1);
            var data={};
            data['name']=name1;
            data['party']='Party '+party1;
            console.log(data);
            fetch('/api/contestant/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(json => {
                console.log('Success:',json);
                document.getElementById('mytableA').innerHTML += '<tr><td>'+k1+'号'+'</td><td>'+json.data.name+'</td><td>70</td><td>'+json.data.party+'</td></tr>';
            ;});
        });
        var k2=0;
        Bform.addEventListener("submit",(ev) => {
            k2++;
            ev.preventDefault();
            var name1=document.getElementById('nameb').value;
            var party1=document.getElementById('partyb').value;
            console.log(party1);
            var data={};
            data['name']=name1;
            data['party']='Party '+party1;
            console.log(data);
            fetch('/api/contestant/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(json => {
                console.log('Success:',json);
                document.getElementById('mytableB').innerHTML += '<tr><td>'+k2+'号'+'</td><td>'+json.data.name+'</td><td>70</td><td>'+json.data.party+'</td></tr>';
            ;});
        });
        var k3=0;
        Cform.addEventListener("submit",(ev) => {
            k3++;
            ev.preventDefault();
            var name1=document.getElementById('namec').value;
            var party1=document.getElementById('partyc').value;
            console.log(party1);
            var data={};
            data['name']=name1;
            data['party']='Party '+party1;
            console.log(data);
            fetch('/api/contestant/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(json => {
                console.log('Success:',json);
                document.getElementById('mytableC').innerHTML += '<tr><td>'+k3+'号'+'</td><td>'+json.data.name+'</td><td>70</td><td>'+json.data.party+'</td></tr>';
            ;});
        });
    </script>
</body>
</html>
